(function(){"use strict";var t={491:function(t,e,a){var r=a(471),n=function(){var t=this,e=t._self._c;return e("section",{staticClass:"container"},[e("h1",[t._v("From Open Weather Map")]),e("vue-weather",{attrs:{"api-key":"45aee2ef715cfa91ed7957e8cfd37a70",units:"uk",language:"en",latitude:t.dhaka.lat,longitude:t.dhaka.lng}},[e("span",{attrs:{slot:"title"},slot:"title"},[t._v("Weather for "+t._s(t.dhaka.name))])]),e("hr"),e("h1",[t._v("From Dark Sky Api")]),e("vue-weather",{attrs:{"use-dark-sky-api":"","api-key":"e20753dfcaae902ab091fbb4925d432a",units:"uk",language:"en",latitude:t.sylhet.lat,longitude:t.sylhet.lng}},[e("span",{attrs:{slot:"title"},slot:"title"},[t._v("Weather for "+t._s(t.sylhet.name))])])],1)},i=[],o=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"vww__widget",style:{color:t.textColor}},[t._t("header",(function(){return[t.hideHeader?t._e():e("div",{staticClass:"vww__header",style:{borderColor:t.barColor}},[e("span",{staticClass:"vww__title"},[t._t("title",(function(){return[t._v("Weather")]}))],2)])]})),e("div",{staticClass:"vww__content"},[t.loading?e("div",{staticClass:"vww__loading"},[t._t("loading",(function(){return[e("skycon",{attrs:{condition:"partly-cloudy-day",color:t.textColor,paused:t.disableAnimation}}),e("span",{staticClass:"vww__title"},[t._v("Loading...")])]}))],2):!t.error&&t.weather&&t.currently&&t.daily?[e("div",{staticClass:"vww__currently"},[e("div",[e("skycon",{attrs:{condition:t.currently.icon,size:"80",color:t.textColor,paused:t.disableAnimation}}),e("div",{staticClass:"vww__temp"},[t._v(" "+t._s(Math.round(t.currently.temperature))+"° "),t.isDownward?e("div",[e("svg",{attrs:{viewBox:"0 0 306 306",width:"24",height:"24"}},[e("polygon",{style:{fill:t.textColor},attrs:{points:"270.3,58.65 153,175.95 35.7,58.65 0,94.35 153,247.35 306,94.35"}})])]):e("div",[e("svg",{attrs:{viewBox:"0 0 306 306",width:"24",height:"24"}},[e("polygon",{style:{fill:t.textColor},attrs:{points:"35.7,247.35 153,130.05 270.3,247.35 306,211.65 153,58.65 0,211.65"}})])])])],1),e("div",{staticClass:"vww__title"},[t._v(t._s(t.currently.summary))]),e("div",{staticClass:"vww__wind"},[t._v(" Wind: "+t._s(Math.round(t.currently.windSpeed))+" mph ("+t._s(t.windBearing)+") ")])]),e("div",{staticClass:"vww__daily"},t._l(t.daily,(function(a){return e("div",{key:a.time,staticClass:"vww__day"},[e("span",[t._v(t._s(a.weekName))]),e("span",[e("skycon",{staticStyle:{display:"block"},attrs:{condition:a.icon,size:"26",color:t.textColor,paused:t.disableAnimation}})],1),e("div",{staticClass:"vww__day-bar"},[e("div",{style:{height:`${a.top}%`}},[e("span",[t._v(t._s(Math.round(a.temperatureMax))+"°")])]),e("div",{style:{borderRadius:"10px",background:t.barColor,height:`${a.height}%`}},[t._v("   ")]),e("div",{style:{height:`${a.bottom}%`}},[e("span",[t._v(t._s(Math.round(a.temperatureMin))+"°")])])])])})),0)]:e("div",{staticClass:"vww__error"},[t._t("error",(function(){return[e("skycon",{attrs:{condition:"rain",color:t.textColor,paused:t.disableAnimation}}),e("span",{staticClass:"vww__title"},[t._v(t._s(t.error||"Something went wrong!"))])]}))],2)],2)],2)},s=[],l=a(0),u=a.n(l);const d="vww__cache_ip",c="vww__cache_ip_location",h="vww__cache_geocode",p={"clear-day":["01d"],"clear-night":["01n"],cloudy:["03d","03n"],fog:["50d","50n"],"partly-cloudy-day":["02d","04d"],"partly-cloudy-night":["02n","04n"],rain:["09d","09n","10d","10n","11d","11n"],sleet:["13d","13n"],snow:["13d","13n"],wind:["50d","50n"]},g={auto:"standard",us:"imperial",uk:"metric"},y={lookupIP:()=>{let t=localStorage[d]||"{}";return t=JSON.parse(t),t.ip?Promise.resolve(t):fetch("https://www.cloudflare.com/cdn-cgi/trace").then((t=>t.text())).then((t=>t.split("\n").map((t=>t.split("="))).filter((t=>2==t.length)).reduce(((t,e)=>(t[e[0].trim()]=e[1].trim(),t)),{}))).then((t=>(localStorage[d]=JSON.stringify(t),t)))},fetchLocationByIP:(t,e)=>{if(!e)return y.lookupIP().then((e=>y.fetchLocationByIP(t,e["ip"])));let a=localStorage[c]||"{}";return a=JSON.parse(a),a[e]?a[e]:(t=t||"f8n4kqe8pv4kii",fetch(`https://api.ipregistry.co/${e}?key=${t}`).then((t=>t.json())).then((t=>(a[e]=t.location||{},localStorage[c]=JSON.stringify(a),a[e]))))},geocode:(t,e,a=!1)=>{let r=localStorage[h]||"{}";if(r=JSON.parse(r),r[e])return Promise.resolve(r[e]);t=t||"c3bb8aa0a56b21122dea6a2a8ada70c8";const n=a?"reverse":"forward";return fetch(`//api.positionstack.com/v1/${n}?access_key=${t}&query=${e}`).then((t=>t.json())).then((t=>{if(t.error)throw new Error("(api.positionstack.com) "+t.error.message);return r[e]=t.data[0],localStorage[h]=JSON.stringify(r),r[e]}))},reverseGeocode:(t,e,a)=>y.geocode(t,`${e},${a}`,!0),fetchWeather:t=>{if(t=t||{},t.units=t.units||"us",t.language=t.language||"en",!t.lat||!t.lng)throw new Error("Geolocation is required");return new Promise(((e,a)=>{u()(`https://api.darksky.net/forecast/${t.apiKey}/${t.lat},${t.lng}?units=${t.units}&lang=${t.language}`,((t,r)=>{t?a(t):e(r)}))}))},fetchOWMWeather:(t={})=>{if(t.units=t.units||"auto",t.version=t.version||"3.0",t.language=t.language||"en",!t.lat||!t.lng)throw new Error("Geolocation is required");const e=g[t.units]||"standard";return fetch(`https://api.openweathermap.org/data/${t.version}/onecall?appid=${t.apiKey}&lat=${t.lat}&lon=${t.lng}&units=${e}&lang=${t.language}`).then((t=>t.json())).then(y.mapData)},mapData:t=>{const{current:e}=t,{weather:a}=e,[r]=a,{description:n,icon:i}=r,o=y.mapIcon(i);return{currently:Object.assign({},e,{icon:o,temperature:e.temp,summary:n,windSpeed:e.wind_speed,windBearing:e.wind_deg}),daily:{data:t.daily.map((t=>({temperatureMax:t.temp.max,temperatureMin:t.temp.min,time:t.dt,icon:y.mapIcon(t.weather[0].icon)})))},hourly:{data:t.hourly.map((t=>({temperature:t.temp})))}}},mapIcon:t=>Object.keys(p).find((e=>p[e].includes(t)))};var w=y,f=a(995),m={name:"VueWeatherWidget",components:{Skycon:f.A},props:{useDarkSkyApi:{type:Boolean,default:!1},apiKey:{type:String,required:!0},latitude:{type:String|Number},longitude:{type:String|Number},language:{type:String,default:"en"},units:{type:String,default:"us"},hideHeader:{type:Boolean,default:!1},updateInterval:{type:Number},disableAnimation:{type:Boolean,default:!1},barColor:{type:String,default:"#444"},textColor:{type:String,default:"#333"},ipregistryKey:{type:String,default:"f8n4kqe8pv4kii"}},data(){return{loading:!0,weather:null,error:null,timeout:null}},watch:{apiKey:"hydrate",latitude:"hydrate",longitude:"hydrate",language:"hydrate",units:"hydrate",updateInterval:"hydrate"},mounted(){this.hydrate()},destroyed(){clearTimeout(this.timeout)},computed:{currently(){return this.weather.currently},isDownward(){const t=this.weather.hourly.data,e=(new Date).getTime()/1e3;for(let a=0;a<t.length;a++)if(!(t[a].time<=e))return t[a].temperature<this.currently.temperature},windBearing(){const t=Math.round(this.currently.windBearing/45);return["N","NE","E","SE","S","SW","W","NW","N"][t]},daily(){const t=[];let e=-1/0,a=1/0;const r=new Date((new Date).toDateString()),n=r.getTime()/1e3+86400-1,i=this.weather.daily.data;for(let s=0;s<i.length;s++){const r=i[s];r.temperatureMax>e&&(e=r.temperatureMax),r.temperatureMin<a&&(a=r.temperatureMin),t.push(Object.assign({},r))}const o=e-a;for(let s=0;s<t.length;++s){const a=t[s];a.time<=n?a.weekName="Today":a.weekName=new Date(1e3*a.time).toLocaleDateString(this.language,{weekday:"short"});const r=a.temperatureMax,i=a.temperatureMin;a.height=Math.round(100*(r-i)/o),a.top=Math.round(100*(e-r)/o),a.bottom=100-(a.top+a.height)}return t}},methods:{async loadWeather(){const t=this.useDarkSkyApi?w.fetchWeather:w.fetchOWMWeather,e=await t({apiKey:this.apiKey,lat:this.latitude,lng:this.longitude,units:this.units,language:this.language});this.$set(this,"weather",e)},autoupdate(){clearTimeout(this.timeout);const t=Number(this.updateInterval);!t||t<10||this.destroyed||(this.timeout=setTimeout((()=>this.hydrate(!1)),t))},hydrate(t=!0){return this.$set(this,"loading",t),this.$nextTick().then(this.processLocation).then(this.loadWeather).then((()=>{this.$set(this,"error",null)})).catch((t=>{this.$set(this,"error",""+t)})).finally((()=>{this.$set(this,"loading",!1),this.autoupdate()}))},processLocation(){if(!this.latitude||!this.longitude)throw new Error("VueWeatherWidget: Latitude or longitude is required")}}},v=m,_=a(656),k=(0,_.A)(v,o,s,!1,null,null,null),b=k.exports,S=b,C={name:"app",components:{VueWeather:S},data:()=>({dhaka:{name:"Dhaka, Bangladesh",lat:23.8103,lng:90.4125},sylhet:{name:"Sylhet, Bangladesh",lat:24.8949,lng:91.8687}})},x=C,$=(0,_.A)(x,n,i,!1,null,null,null),O=$.exports;new r.Ay({render:t=>t(O)}).$mount("#app")}},e={};function a(r){var n=e[r];if(void 0!==n)return n.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,r,n,i){if(!r){var o=1/0;for(d=0;d<t.length;d++){r=t[d][0],n=t[d][1],i=t[d][2];for(var s=!0,l=0;l<r.length;l++)(!1&i||o>=i)&&Object.keys(a.O).every((function(t){return a.O[t](r[l])}))?r.splice(l--,1):(s=!1,i<o&&(o=i));if(s){t.splice(d--,1);var u=n();void 0!==u&&(e=u)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[r,n,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};a.O.j=function(e){return 0===t[e]};var e=function(e,r){var n,i,o=r[0],s=r[1],l=r[2],u=0;if(o.some((function(e){return 0!==t[e]}))){for(n in s)a.o(s,n)&&(a.m[n]=s[n]);if(l)var d=l(a)}for(e&&e(r);u<o.length;u++)i=o[u],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(d)},r=self["webpackChunkvww_example"]=self["webpackChunkvww_example"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=a.O(void 0,[504],(function(){return a(491)}));r=a.O(r)})();
//# sourceMappingURL=app.8ae5b7cf.js.map